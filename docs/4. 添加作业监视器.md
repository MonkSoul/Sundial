## 4. 添加作业监视器

`Sundial` 提供了 `IJobMonitor` 监视器接口，实现该接口可以监视所有作业，包括 `执行之前、执行之后，执行异常，共享上下文数据`。

如添加 `YourJobMonitor`：

```cs
public class YourJobMonitor : IJobMonitor
{
    private readonly ILogger<YourJobMonitor> _logger;
    public YourJobMonitor(ILogger<YourJobMonitor> logger)
    {
        _logger = logger;
    }

    public Task OnExecutingAsync(JobExecutingContext context, CancellationToken cancellationToken)
    {
        _logger.LogInformation("执行之前：{JobName}", context.JobDetail.Identity);
        return Task.CompletedTask;
    }

    public Task OnExecutedAsync(JobExecutedContext context, CancellationToken cancellationToken)
    {
        _logger.LogInformation("执行之后：{JobName}", context.JobDetail.Identity);

        if (context.Exception != null)
        {
            _logger.LogError(context.Exception, "执行出错啦：{JobName}", context.JobDetail.Identity);
        }

        return Task.CompletedTask;
    }
}
```

最后，在注册 `Sundial` 服务中注册 `YourJobMonitor`：

```cs
services.Sundial(builder =>
{
    builder.AddMonitor<YourJobMonitor>();
});
```