## 1. 快速入门

1. 定义作业，并实现 `IJob` 接口：

**周期作业**：固定时间执行作业，如 `1秒`。

```cs
[SimpleJob("simple_job", 1000)]
public class SimpleJob : IJob
{
    private readonly ILogger<SimpleJob> _logger;
    public SimpleJob(ILogger<SimpleJob> logger)
    {
        _logger = logger;
    }

    public Task ExecuteAsync(JobExecutingContext context, CancellationToken cancellationToken)
    {
        // Do your job!!!
        _logger.LogInformation("<{JobName}> {DateTime}", context.JobDetail.Identity, DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
        return Task.CompletedTask;
    }
}
```

**Cron 作业**：支持完整 `Cron 表达式` 精确控制。

```cs
[CronJob("cron_job", "* * * * *")]
public class CronJob : IJob
{
    private readonly ILogger<CronJob> _logger;
    public CronJob(ILogger<CronJob> logger)
    {
        _logger = logger;
    }

    public Task ExecuteAsync(JobExecutingContext context, CancellationToken cancellationToken)
    {
        // // Do your job!!!
        _logger.LogInformation("<{JobName}> {DateTime}", context.JobDetail.Identity, DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
        return Task.CompletedTask;
    }
}
```

2. 在 `Startup.cs` 注册 `AddSundial` 服务和作业：

```cs
services.AddSundial(builder =>
{
    builder.AddJob<SimpleJob>();
    builder.CronJob<SimpleJob>();
});
```

3. 运行项目：

```bash
info: Sundial.JobScheduler[0]
      Scheduler of <simple_job> Service is running.
info: Sundial.JobScheduler[0]
      Scheduler of <cron_job> Service is running.
info: Sundial.Samples.SimpleJob[0]
      <simple_job> 2021-11-16 11:15:45
info: Sundial.Samples.CronJob[0]
      <cron_job> 2021-11-16 11:15:45
      <simple_job> 2021-11-16 11:15:46
info: Sundial.Samples.SimpleJob[0]
```

4. 结合 API 调度作业

```cs
public class ApiController: ControllerBase
{
    private readonly IScheduler _scheduler;
    public ApiController(IScheduler scheduler)
    {
        _scheduler = scheduler;
    }

    // 暂停
    public async Task PauseAsync(string jobName)
    {
        await _scheduler.PauseAsync(jobName);
    }

    // 开始
    public async Task StartAsync(string jobName)
    {
        await _scheduler.StartAsync(jobName);
    }

    // ......
}
```