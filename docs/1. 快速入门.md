## 1. 快速入门

1. 定义作业，并实现 `IJob` 接口：

周期作业：

```cs
[SimpleJob("simple_job", 1000)]
public class SimpleJob : IJob
{
    private readonly ILogger<SimpleJob> _logger;
    public SimpleJob(ILogger<SimpleJob> logger)
    {
        _logger = logger;
    }

    public Task ExecuteAsync(JobExecutingContext context, CancellationToken cancellationToken)
    {
        // Do your job!!!
        _logger.LogInformation("<{JobName}> {DateTime}", context.JobDetail.Identity, DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
        return Task.CompletedTask;
    }
}
```

Cron 作业：

```cs
[CronJob("cron_job", "* * * * *")]
public class CronJob : IJob
{
    private readonly ILogger<CronJob> _logger;
    public CronJob(ILogger<CronJob> logger)
    {
        _logger = logger;
    }

    public Task ExecuteAsync(JobExecutingContext context, CancellationToken cancellationToken)
    {
        // // Do your job!!!
        _logger.LogInformation("<{JobName}> {DateTime}", context.JobDetail.Identity, DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
        return Task.CompletedTask;
    }
}
```

2. 在 `Startup.cs` 注册 `SchedulerJob` 服务和作业：

```cs
services.AddSchedulerJob(builder =>
{
    builder.AddJob<SimpleJob>();
    builder.CronJob<SimpleJob>();
});
```

3. 运行项目：

```bash
info: Sundial.JobScheduler[0]
      Scheduler of <simple_job> Service is running.
info: Sundial.JobScheduler[0]
      Scheduler of <cron_job> Service is running.
info: Sundial.Samples.SimpleJob[0]
      <simple_job> 2021-11-16 11:15:45
info: Sundial.Samples.CronJob[0]
      <cron_job> 2021-11-16 11:15:45
      <simple_job> 2021-11-16 11:15:46
info: Sundial.Samples.SimpleJob[0]
```

4. 结合 API 调度作业

```cs
public class ApiController: ControllerBase
{
    private readonly ISchedulerJob _schedulerJob;
    public ApiController(ISchedulerJob schedulerJob)
    {
        _schedulerJob = schedulerJob;
    }

    // 暂停
    public async Task PauseAsync(string jobName)
    {
        await _schedulerJob.PauseAsync(jobName);
    }

    // 开始
    public async Task StartAsync(string jobName)
    {
        await _schedulerJob.StartAsync(jobName);
    }

    // ......
}
```