## 6. 使用有作用域的服务

`Sundial` 所有服务均注册为单例，如需使用作用域服务（单例服务可直接注入），可通过依赖注入 `IServiceProvider` 实例并通过 `CreateScope()` 创建一个作用域，如：

```cs
[SimpleJob("simple_job", 1000)]
public class SimpleJob : IJob
{
    private readonly ILogger<SimpleJob> _logger;

    public SimpleJob(SimpleJob services
        , ILogger<SimpleJob> logger)
    {
        Services = services;
        _logger = logger;
    }

    public IServiceProvider Services { get; }

    public Task ExecuteAsync(JobExecutingContext context, CancellationToken cancellationToken)
    {
        using (var scope = Services.CreateScope())
        {
            var scopedProcessingService = scope.ServiceProvider.GetRequiredService<IScopedProcessingService>();
            // ....
        }
    }
}
```